{
  "id": null,
  "uid": "mysql-prod-full-dashboard",
  "title": "MySQL Production Dashboard",
  "tags": ["mysql","prometheus","production","monitoring"],
  "timezone": "browser",
  "editable": true,
  "refresh": "10s",
  "schemaVersion": 37,
  "version": 1,
  "graphTooltip": 1,
  "panels": [
    {
      "type": "row",
      "title": "Connections & Threads",
      "collapsed": false,
      "panels": [
        {
          "type": "stat",
          "title": "Active Connections",
          "targets":[{"expr":"mysql_global_status_threads_connected"}],
          "fieldConfig":{"unit":"short","thresholds":{"mode":"absolute","steps":[{"value":0,"color":"green"},{"value":80,"color":"orange"},{"value":95,"color":"red"}]}},
          "alert":{"conditions":[{"evaluator":{"type":"gt","params":[300]},"operator":{"type":"and"},"query":{"params":["A"]},"reducer":{"type":"avg","params":[]}}],"for":"1m","frequency":"10s","handler":1,"name":"Active Connections Alert"}
        },
        {
          "type": "stat",
          "title": "Max Connections",
          "targets":[{"expr":"mysql_global_variables_max_connections"}],
          "fieldConfig":{"unit":"short"}
        },
        {
          "type": "gauge",
          "title": "Threads Running",
          "targets":[{"expr":"mysql_global_status_threads_running"}],
          "fieldConfig":{"unit":"short"}
        },
        {
          "type": "gauge",
          "title": "Threads Sleeping",
          "targets":[{"expr":"mysql_global_status_threads_connected - mysql_global_status_threads_running"}],
          "fieldConfig":{"unit":"short"}
        }
      ]
    },
    {
      "type": "row",
      "title": "Query Metrics",
      "collapsed": false,
      "panels": [
        {
          "type": "timeseries",
          "title": "Queries per Second",
          "targets":[{"expr":"rate(mysql_global_status_questions[1m])"}],
          "fieldConfig":{"unit":"queries/sec"},
          "alert":{"conditions":[{"evaluator":{"type":"gt","params":[1000]},"operator":{"type":"and"},"query":{"params":["A"]},"reducer":{"type":"avg","params":[]}}],"for":"1m","frequency":"10s","handler":1,"name":"High QPS Alert"}
        },
        {
          "type": "timeseries",
          "title": "Slow Queries per Second",
          "targets":[{"expr":"rate(mysql_global_status_slow_queries[1m])"}],
          "fieldConfig":{"unit":"queries/sec"},
          "alert":{"conditions":[{"evaluator":{"type":"gt","params":[50]},"operator":{"type":"and"},"query":{"params":["A"]},"reducer":{"type":"avg","params":[]}}],"for":"5m","frequency":"10s","handler":1,"name":"Slow Queries Alert"}
        },
        {
          "type": "gauge",
          "title": "Query Cache Hit Rate",
          "targets":[{"expr":"mysql_global_status_qcache_hits / mysql_global_status_qcache_inserts"}],
          "fieldConfig":{"unit":"percent"}
        },
        {
          "type": "timeseries",
          "title": "Temporary Tables Created per Second",
          "targets":[{"expr":"rate(mysql_global_status_created_tmp_tables[1m])"}],
          "fieldConfig":{"unit":"tables/sec"}
        }
      ]
    },
    {
      "type": "row",
      "title": "InnoDB Metrics",
      "collapsed": false,
      "panels": [
        {
          "type": "gauge",
          "title": "Buffer Pool Usage",
          "targets":[{"expr":"mysql_innodb_buffer_pool_pages_data / mysql_innodb_buffer_pool_pages_total"}],
          "fieldConfig":{"unit":"percent"},
          "alert":{"conditions":[{"evaluator":{"type":"gt","params":[90]},"operator":{"type":"and"},"query":{"params":["A"]},"reducer":{"type":"avg","params":[]}}],"for":"2m","frequency":"10s","handler":1,"name":"Buffer Pool Usage Alert"}
        },
        {
          "type": "gauge",
          "title": "Dirty Pages",
          "targets":[{"expr":"mysql_innodb_buffer_pool_pages_dirty"}],
          "fieldConfig":{"unit":"pages"}
        },
        {
          "type": "timeseries",
          "title": "Buffer Pool Hit Rate",
          "targets":[{"expr":"rate(mysql_innodb_buffer_pool_read_requests[1m]) / rate(mysql_innodb_buffer_pool_reads[1m])"}],
          "fieldConfig":{"unit":"percent"}
        },
        {
          "type": "bargauge",
          "title": "Lock Waits",
          "targets":[{"expr":"mysql_innodb_status_lock_waits"}],
          "fieldConfig":{"unit":"locks"}
        },
        {
          "type": "stat",
          "title": "Deadlocks",
          "targets":[{"expr":"mysql_global_status_innodb_deadlocks"}],
          "fieldConfig":{"unit":"short"},
          "alert":{"conditions":[{"evaluator":{"type":"gt","params":[5]},"operator":{"type":"and"},"query":{"params":["A"]},"reducer":{"type":"avg","params":[]}}],"for":"5m","frequency":"10s","handler":1,"name":"Deadlocks Alert"}
        }
      ]
    },
    {
      "type": "row",
      "title": "Replication Metrics",
      "collapsed": false,
      "panels": [
        {
          "type": "gauge",
          "title": "Replication Lag (sec)",
          "targets":[{"expr":"mysql_slave_status_seconds_behind_master"}],
          "fieldConfig":{"unit":"seconds"},
          "alert":{"conditions":[{"evaluator":{"type":"gt","params":[30]},"operator":{"type":"and"},"query":{"params":["A"]},"reducer":{"type":"avg","params":[]}}],"for":"1m","frequency":"10s","handler":1,"name":"Replication Lag Alert"}
        },
        {
          "type": "stat",
          "title": "Slave IO Running",
          "targets":[{"expr":"mysql_slave_status_slave_io_running"}]
        },
        {
          "type": "stat",
          "title": "Slave SQL Running",
          "targets":[{"expr":"mysql_slave_status_slave_sql_running"}]
        }
      ]
    },
    {
      "type": "row",
      "title": "Disk & Memory",
      "collapsed": false,
      "panels": [
        {
          "type": "piechart",
          "title": "Disk Usage",
          "targets":[{"expr":"mysql_global_status_innodb_data_written / mysql_global_status_innodb_data_reads"}]
        },
        {
          "type": "piechart",
          "title": "Memory Usage",
          "targets":[{"expr":"mysql_global_status_memory_used / mysql_global_status_memory_total"}]
        },
        {
          "type": "gauge",
          "title": "Table Open Cache Usage",
          "targets":[{"expr":"mysql_global_status_open_tables / mysql_global_variables_table_open_cache"}],
          "fieldConfig":{"unit":"percent"}
        }
      ]
    },
    {
      "type": "row",
      "title": "Table & Index Stats",
      "collapsed": false,
      "panels": [
        {
          "type": "table",
          "title": "Table Rows",
          "targets":[{"expr":"mysql_information_schema_table_rows"}]
        },
        {
          "type": "bargauge",
          "title": "Index Sizes",
          "targets":[{"expr":"mysql_information_schema_index_size"}]
        },
        {
          "type": "table",
          "title": "Lock Waits by Table",
          "targets":[{"expr":"mysql_innodb_status_lock_structs"}]
        }
      ]
    },
    {
      "type": "row",
      "title": "Errors & Network",
      "collapsed": false,
      "panels": [
        {
          "type": "stat",
          "title": "Aborted Clients",
          "targets":[{"expr":"mysql_global_status_aborted_clients"}]
        },
        {
          "type": "stat",
          "title": "Aborted Connects",
          "targets":[{"expr":"mysql_global_status_aborted_connects"}]
        },
        {
          "type": "timeseries",
          "title": "Bytes Sent / Received",
          "targets":[{"expr":"rate(mysql_global_status_bytes_sent[1m])"},{"expr":"rate(mysql_global_status_bytes_received[1m])"}],
          "fieldConfig":{"unit":"bytes/sec"}
        }
      ]
    }
  ],
  "templating":{
    "list":[
      {"name":"db","type":"query","datasource":"MySQL","query":"SHOW DATABASES","multi":true,"includeAll":true},
      {"name":"host","type":"query","datasource":"MySQL","query":"SHOW HOSTS","multi":true,"includeAll":true},
      {"name":"instance","type":"query","datasource":"MySQL","query":"SHOW INSTANCES","multi":true,"includeAll":true}
    ]
  },
  "time":{"from":"now-6h","to":"now"},
  "timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h"]}
}
