############################################
# SonarCloud Configuration
# Project: php-swoole-crud-microservice
# Owner: rxcod9
# Runtime: PHP 8.4 + Swoole
############################################

sonar.projectKey=rxcod9_php-swoole-crud-microservice
sonar.organization=rxcod9
sonar.projectName=php-swoole-crud-microservice

# ==========================================
# Source Configuration
# ==========================================
# Include only PHP app source code
sonar.sources=src,public

# PHP language and encoding
sonar.language=php
sonar.sourceEncoding=UTF-8

# ==========================================
# Exclusions (Code Analysis)
# ==========================================
# Exclude non-source, build, and environment directories
sonar.exclusions=\
tests/**,\
vendor/**,\
dist/**,\
build/**,\
node_modules/**,\
coverage/**,\
docker/**,\
tools/**,\
scripts/**,\
migrations/**,\
database/**,\
docs/**,\
logs/**,\
grafana/**,\
public/**,\
k6/**,\
.github/**,\
.vscode/**,\
.phpunit.cache/**,\
.rector_cache/**,\
.git/**,\
config,\
bin

# ==========================================
# Test Configuration
# ==========================================
# Register test folder and patterns
sonar.tests=tests
sonar.test.inclusions=tests/**

# PHPUnit XML report generated by <logging>
# You already generate JUnit at: tests/logs/junit.xml
sonar.php.tests.reportPath=tests/logs/junit.xml

# ==========================================
# Coverage Configuration
# ==========================================
# PHPUnit Clover coverage report
# To generate: vendor/bin/phpunit --coverage-clover tests/coverage/clover.xml
sonar.php.coverage.reportPaths=tests/coverage/clover.xml

# Exclude test and mock files from coverage metrics
sonar.coverage.exclusions=\
tests/**,\
**/*.test.php,\
**/*.spec.php,\
**/__mocks__/**

# ==========================================
# Duplication Detection
# ==========================================
sonar.cpd.exclusions=\
migrations/**,\
database/**

# ==========================================
# Working Directory & Logging
# ==========================================
sonar.working.directory=.sonar

# Optional verbose mode for debugging
# sonar.verbose=true
# sonar.log.level=DEBUG